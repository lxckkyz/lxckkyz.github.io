<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja Virtual Segura</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <h1>üõí Loja Virtual Segura</h1>
            <nav class="nav">
                <button class="nav-btn active" data-section="loja">Loja</button>
                <button class="nav-btn" data-section="conta">Conta</button>
                <button class="nav-btn admin-only" data-section="admin" style="display:none;">Painel Admin</button>
            </nav>
            <div class="header-user">
                <span id="userDisplay">N√£o autenticado</span>
                <button id="logoutBtn" class="btn btn-logout" style="display:none;">Sair</button>
            </div>
        </div>
    </header>

    <!-- SE√á√ÉO LOJA -->
    <section id="lojaSection" class="section active">
        <div class="container">
            <div class="loja-grid">
                <!-- PRODUTOS -->
                <div class="produtos-area">
                    <h2>Produtos Dispon√≠veis</h2>
                    <div id="produtosList" class="produtos-grid">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>

                <!-- CARRINHO -->
                <aside class="carrinho-sidebar">
                    <h3>üõí Carrinho</h3>
                    <div id="carrinhoItems" class="carrinho-items">
                        <p>Carrinho vazio</p>
                    </div>
                    <div class="carrinho-footer">
                        <div class="total">Total: R$ <span id="totalCarrinho">0.00</span></div>
                        <button id="finalizarCompraBtn" class="btn btn-primary" style="display:none;">Finalizar Compra</button>
                        <p id="carrinhoMsg" class="msg"></p>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- SE√á√ÉO CONTA (LOGIN/REGISTRO) -->
    <section id="contaSection" class="section">
        <div class="container">
            <div class="conta-grid">
                <!-- LOGIN USU√ÅRIO COMUM -->
                <div class="auth-box">
                    <h2>Login de Usu√°rio</h2>
                    <form id="loginForm" class="form">
                        <input type="email" id="loginEmail" placeholder="Email" required>
                        <input type="password" id="loginPassword" placeholder="Senha" required>
                        <button type="submit" class="btn btn-primary">Entrar</button>
                        <p id="loginMsg" class="msg"></p>
                    </form>
                </div>

                <!-- REGISTRO USU√ÅRIO -->
                <div class="auth-box">
                    <h2>Registrar Novo Usu√°rio</h2>
                    <form id="registroForm" class="form">
                        <input type="text" id="registroNome" placeholder="Nome completo" required>
                        <input type="email" id="registroEmail" placeholder="Email" required>
                        <input type="password" id="registroSenha" placeholder="Senha (m√≠n. 6 caracteres)" required>
                        <input type="password" id="registroConfirm" placeholder="Confirmar senha" required>
                        <button type="submit" class="btn btn-primary">Registrar</button>
                        <p id="registroMsg" class="msg"></p>
                    </form>
                </div>

                <!-- LOGIN ADMIN -->
                <div class="auth-box">
                    <h2>Login Admin</h2>
                    <form id="loginAdminForm" class="form">
                        <input type="email" id="loginAdminEmail" placeholder="Email Admin" required>
                        <input type="password" id="loginAdminPassword" placeholder="Senha Admin" required>
                        <button type="submit" class="btn btn-primary">Entrar como Admin</button>
                        <p id="loginAdminMsg" class="msg"></p>
                    </form>
                </div>

                <!-- MEUS PEDIDOS (Usu√°rio logado) -->
                <div id="meusPedidosBox" class="auth-box" style="display:none;">
                    <h2>Meus Pedidos</h2>
                    <div id="meusPedidosList" class="pedidos-list">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SE√á√ÉO PAINEL ADMIN -->
    <section id="adminSection" class="section">
        <div class="container">
            <div class="admin-tabs">
                <button class="tab-btn active" data-tab="produtores">Produtores e Estoque</button>
                <button class="tab-btn" data-tab="pedidos">Pedidos</button>
                <button class="tab-btn" data-tab="pagamento">Configura√ß√µes de Pagamento</button>
            </div>

            <!-- TAB: PRODUTORES -->
            <div id="produtoresTab" class="tab-content active">
                <h2>Gerenciar Produtores</h2>
                
                <div class="form-section">
                    <h3>Cadastrar Novo Produtor</h3>
                    <form id="novoProductorForm" class="form">
                        <input type="text" id="novoProductorNome" placeholder="Nome do produtor" required>
                        <input type="email" id="novoProductorEmail" placeholder="Email" required>
                        <button type="submit" class="btn btn-primary">Adicionar Produtor</button>
                        <p id="novoProductorMsg" class="msg"></p>
                    </form>
                </div>

                <div id="produtoresList" class="produtores-list">
                    <!-- Preenchido por JavaScript -->
                </div>
            </div>

            <!-- TAB: PEDIDOS -->
            <div id="pedidosTab" class="tab-content">
                <h2>Hist√≥rico de Pedidos</h2>
                <div id="pedidosAdminList" class="pedidos-list">
                    <!-- Preenchido por JavaScript -->
                </div>
            </div>

            <!-- TAB: PAGAMENTO -->
            <div id="pagamentoTab" class="tab-content">
                <h2>Configura√ß√µes de Pagamento</h2>
                <form id="configPagamentoForm" class="form">
                    <div>
                        <label>Provedor de Pagamento Padr√£o:</label>
                        <select id="provedorPagamento" required>
                            <option value="stripe">Stripe</option>
                            <option value="mercadoPago">Mercado Pago</option>
                        </select>
                    </div>
                    <div>
                        <label>Chave P√∫blica Stripe:</label>
                        <input type="text" id="stripePublicKey" placeholder="pk_live_..." maxlength="100">
                    </div>
                    <div>
                        <label>Chave P√∫blica Mercado Pago:</label>
                        <input type="text" id="mercadoPagoPublicKey" placeholder="APP_USER_ID..." maxlength="100">
                    </div>
                    <button type="submit" class="btn btn-primary">Salvar Configura√ß√µes</button>
                    <p id="configPagamentoMsg" class="msg"></p>
                </form>
            </div>
        </div>
    </section>

    <!-- MODAL: ADICIONAR ITEM AO PRODUTOR -->
    <div id="novoItemModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Adicionar Item ao Estoque</h2>
            <form id="novoItemForm" class="form">
                <input type="hidden" id="novoItemProductorId">
                <input type="text" id="novoItemNome" placeholder="Nome do item" required>
                <textarea id="novoItemDescricao" placeholder="Descri√ß√£o" required></textarea>
                <input type="number" id="novoItemPreco" placeholder="Pre√ßo (R$)" step="0.01" min="0.01" required>
                <button type="submit" class="btn btn-primary">Adicionar Item</button>
                <button type="button" class="btn btn-secondary" onclick="fecharModal()">Cancelar</button>
                <p id="novoItemMsg" class="msg"></p>
            </form>
        </div>
    </div>

    <!-- MODAL: CHECKOUT -->
    <div id="checkoutModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Finalizar Compra</h2>
            <form id="checkoutForm" class="form">
                <h3>Dados do Cliente</h3>
                <input type="text" id="checkoutNome" placeholder="Nome completo" required>
                <input type="email" id="checkoutEmail" placeholder="Email" required>
                <input type="text" id="checkoutTelefone" placeholder="Telefone" required>
                <input type="text" id="checkoutEndereco" placeholder="Endere√ßo" required>
                <input type="text" id="checkoutCidade" placeholder="Cidade" required>
                <input type="text" id="checkoutCep" placeholder="CEP" required>

                <h3>Dados de Pagamento (Simulado)</h3>
                <input type="text" id="checkoutCartao" placeholder="N√∫mero do cart√£o (16 d√≠gitos)" required pattern="\d{16}">
                <input type="text" id="checkoutValidade" placeholder="MM/AA" required pattern="\d{2}/\d{2}">
                <input type="text" id="checkoutCvv" placeholder="CVV (3 d√≠gitos)" required pattern="\d{3}">

                <div class="resumo-compra">
                    <h4>Resumo:</h4>
                    <p>Total: R$ <span id="checkoutTotal">0.00</span></p>
                    <p id="checkoutProvedor"></p>
                </div>

                <button type="submit" class="btn btn-primary">Confirmar Pagamento</button>
                <button type="button" class="btn btn-secondary" onclick="fecharCheckout()">Cancelar</button>
                <p id="checkoutMsg" class="msg"></p>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
